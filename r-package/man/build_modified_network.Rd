% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/build_modified_network.R
\name{build_modified_network}
\alias{build_modified_network}
\title{Create a transport network used for routing in R5 with modified OSM car speeds}
\usage{
build_modified_network(
  data_path,
  new_carspeeds,
  output_path = tempdir_unique(),
  default_speed = NULL,
  percentage_mode = TRUE,
  verbose = FALSE,
  elevation = "TOBLER"
)
}
\arguments{
\item{data_path}{Character. Path to the directory with the\code{.pbf} file of the
OSM network and optionally supporting data.}

\item{new_carspeeds}{data.frame/data.table. Table specifying the
speed modifications. The table must contain columns \code{osm_id} and
\code{max_speed}.}

\item{output_path}{Character. A string pointing to the directory where the
modified \code{network.dat} will be saved. Must be different from \code{data_path}.
Defaults to a temporary directory.}

\item{default_speed}{Numeric. Default speed to use for segments not specified
in the CSV. Must be >= 0. Defaults to \code{NULL} so that roads not listed
in. the CSV have their speeds unchanged.}

\item{percentage_mode}{Logical. If \code{TRUE}, values in \code{max_speed} are
interpreted as percentages of original speeds; if \code{FALSE}, as
absolute speeds (km/h). Defaults to \code{TRUE} - percentages.}

\item{verbose}{A logical. Whether to show \code{R5} informative messages when
running the function. Defaults to \code{FALSE} (please note that in such case
\code{R5} error messages are still shown). Setting \code{verbose} to \code{TRUE} shows
detailed output, which can be useful for debugging issues not caught by
\code{r5r}.}

\item{@template}{elevation For more info see \code{\link{setup_r5}}.}
}
\value{
An R5 core object representing the rebuilt network with modified car speeds.
}
\description{
The function builds a transport network with modified OSM car speeds. The new
speed factors must me passed from a \code{.csv} file indication the new max speed
of each OSM edge id.
}
\details{
The CSV must have columns named \code{osm_id} and \code{max_speed}. \code{max_speed}
can be specified as a percentage of the original road speed or as an absolute
speed in km/h. The function rebuilds the network in \code{output_path} and
returns a new \code{r5r_network} object.
}
\examples{
\dontshow{if (identical(tolower(Sys.getenv("NOT_CRAN")), "true")) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
library(r5r)

# path to OSM .pbf file
data_path <- system.file("extdata/poa", package = "r5r")

# path to CSV with a table pointing to the new speed info
new_carspeeds <- read.csv(file.path(data_path, "poa_osm_congestion.csv"))

r5r_network_new_speed <- r5r::build_modified_network(
  data_path = data_path,
  new_carspeeds = new_carspeeds,
  output_path = tempdir(),
  percentage_mode = TRUE
)
\dontshow{\}) # examplesIf}
}
\concept{modify_osm_car_speeds}
